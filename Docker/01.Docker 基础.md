# Docker 基础
## Docker是什么

Docker是基于Go语言开发的开源的应用容器引擎。可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口,并且容器性能开销极低。

Docker从17.03版本之后分为CE（Community Edition: 社区版）和 EE（Enterprise Edition: 企业版）。

## Docker与虚拟机的区别

![img](./img/docker与虚拟机区别.png)

相较于VM，Docker容器作为一种轻量级的虚拟化方式，在应用方面具有以下显著优势：

- Docker容器可以在秒级时间内快速启动和停止，相较传统虚拟机显著提升。
- Docker容器对系统资源要求低，数千个Docker容器可同时运行在同一个主机上。
- Docker容器通过类似Git的操作来方便用户获取和更新应用镜像。
- Docker容器通过Dockerfile配置文件实现自动化创建和灵活部署，提高工作效率。
- Docker容器除了运行其中的应用之外，基本不消耗额外的系统资源，保证应用性能的同时，尽量减小系统开销。

下图可直观了解Docker容器与传统VM方式的区别：

![img](./img/docker与vm对比.png)

## Docker的优点

**更快速的应用交付和部署** Docker 允许开发人员使用您提供的应用程序或服务的本地容器在标准化环境中工作，从而简化了开发的生命周期。

**更高效的资源利用** Docker 轻巧快速。它为基于虚拟机管理程序的虚拟机提供了可行、经济、高效的替代方案，因此您可以利用更多的计算能力来实现业务目标。Docker 非常适合于高密度环境以及中小型部署，而您可以用更少的资源做更多的事情。

**更简单的运维和扩展** Docker 使用的分层存储以及镜像的技术，使得应用重复部分的复用更为容易，也使得应用的维护更新更加简单，基于基础镜像进一步扩展镜像也变得非常简单。Docker团队同各个开源项目团队一起维护了一大批高质量的官方镜像，既可以直接在生产环境使用，又可以作为基础进一步定制，大大的降低了应用服务的镜像制作成本。

**更轻松的迁移** 由于 Docker 确保了执行环境的一致性，使得应用的迁移更加容易。Docker可以在很多平台上运行，无论是物理机、虚拟机、公有云、私有云，其运行结果是一致的。用户可以很轻易地将应用迁移到另一个平台上，不用担心运行环境的变化。

**持续交付和部署** 使用 Docker可以通过定制应用镜像来实现持续集成、持续交付、部署。开发者可以通过 Dockerfile 来进行镜像构建，并结合持续集成系统进行集成测试，运维则可以直接在生产环境中快速部署该镜像，结合持续部署系统进行自动部署。

## Docker架构

Docker使用客户端-服务器架构C/S。Docker client与Docker daemon(守护进程)进行会话，该守护进程完成building(构建)，running(运行)和distributing(分发)Docker容器的工作。架构图如下：

![img](./img/docker架构.png)

Docker 包括三个基本概念，镜像、容器、仓库。

**镜像（Image）**：Docker镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的配置参数。 镜像不包含任何动态数据，其内容在构建之后也不会被改变。镜像可以用来创建Docker容器，用户可以使用设备上已有的镜像来安装多个相同的Docker容器。

**容器（Container）**：镜像创建的运行实例，Docker利用容器来运行应用。每个容器都是相互隔离的、保证安全的平台。我们可以把容器看做是一个轻量级的Linux运行环境。

**仓库（Repository）**：集中存放镜像文件的地方。用户创建完镜像后，可以将其上传到公共仓库或者私有仓库，需要在另一台主机上使用该镜像时，只需要从仓库上下载即可。仓库也可看成一个代码控制中心，只不过用来保存的是镜像。




